name: deploy
on:
  workflow_dispatch:

# Note: This workflow is deprecated. Use .github/workflows/ci.yml instead.
# The new CI/CD pipeline includes automated tests and build verification.
# This workflow is kept for manual deployment only.

jobs:
  deploy:
    runs-on: self-hosted
    steps:
      - name: pull
        working-directory: /www/event-stream-filter/
        run: git reset --hard && git pull

      - name: install
        working-directory: /www/event-stream-filter/
        run: npm ci --production

      - name: restart
        working-directory: /www/event-stream-filter/
        run: chmod +x restart.sh && ./restart.sh